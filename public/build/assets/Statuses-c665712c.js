import{r as i,K as L,a as s,j as e,g as E}from"./app-a5a2f0d4.js";import{M as R,S as y}from"./SecondaryButton-3d18aa7f.js";import{T as w,I as N}from"./TextInput-af895238.js";import{I as b}from"./InputLabel-94fe065d.js";import{P as v}from"./PrimaryButton-243eb1ea.js";/* empty css                         */import{D as l}from"./Dropdown-0b99a495.js";import{N as B}from"./NoData-e2227503.js";import{S as F,Q as m}from"./SmallText-b637ac0b.js";import"./transition-0e1e8dab.js";function O({className:S,statuses:c}){const[k,h]=i.useState(!1),[r,C]=i.useState([]),u=i.useRef(),D=c.length>0,{data:o,setData:p,post:I,processing:M,reset:x,errors:f}=L({status:"active"}),g=()=>{h(!0)},A=t=>{t.preventDefault(),I(route("settings.status.create"),{preserveScroll:!0,onSuccess:()=>n(),onError:()=>u.current.focus(),onFinish:()=>x()})},n=(t=!1)=>{h(!1),x(),t&&window.location.reload()},T=(t,a)=>{t.preventDefault(),C(a),g()},d=()=>{let t=o.name??r.name,a=o.code??r.code;return t!==r.name||a!==r.code},j=t=>{if(t.preventDefault(),!d()){m.info("No changes were made to save");return}E.post(route("settings.status.update",r.id),{name:o.name??r.name,code:o.code??r.code}).then(a=>{typeof a.data<"u"&&a.data.status&&a.data.status=="success"?m.success(a.data.message??"Status updated successfully!"):m.error(a.data.message??"An error occurred")}).catch(a=>{console.log("An error occurred when trying to updated the status. Please contact your administrator and show them the error below:"),console.error(a)}),n(d())};return s("section",{className:`space-y-6 ${S}`,children:[s("header",{children:[e("h2",{className:"text-lg font-medium font-bold text-gray-900",children:"Statuses"}),e("p",{className:"mt-1 text-xs text-gray-600",children:"Manage the statuses that can be applied to your documents."})]}),D?e("div",{children:s("table",{className:"min-w-full rounded-md",children:[e("thead",{className:"bg-gray-600 border-b",children:s("tr",{children:[e("th",{scope:"col",className:"px-6 py-4 text-sm text-left text-white font-large",children:"Id"}),e("th",{scope:"col",className:"px-6 py-4 text-sm text-left text-white font-large",children:"Name"}),e("th",{scope:"col",className:"px-6 py-4 text-sm text-left text-white font-large",children:"Code"}),e("th",{scope:"col",className:"px-6 py-4 text-sm text-left text-white font-large",children:"Status"}),e("th",{scope:"col",className:"px-6 py-4 text-sm text-white font-large",children:"Actions"})]})}),e("tbody",{children:c?c.map(t=>s("tr",{className:t.status=="active"?"bg-white border-b":"bg-gray-200 border-b",children:[e("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap",children:t.id}),e("td",{className:"px-6 py-4 text-sm font-light text-gray-900 whitespace-nowrap",children:t.name}),e("td",{className:"px-6 py-4 text-sm font-light font-bold text-gray-900 whitespace-nowrap",children:t.code}),e("td",{className:"px-6 py-4 text-sm font-light text-gray-900 uppercase whitespace-nowrap",children:t.status=="active"?e("span",{className:"bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-green-900 dark:text-green-300",children:"active"}):e("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-yellow-900 dark:text-yellow-300",children:"inactive"})}),e("td",{className:"px-6 py-4 text-sm font-light text-center text-gray-900 whitespace-nowrap",children:s(l,{children:[e(l.Trigger,{children:e("span",{className:"inline-flex rounded-md",children:s("button",{type:"button",className:"inline-flex items-center px-3 py-2 text-sm font-medium leading-4 text-white transition duration-150 ease-in-out bg-gray-600 border border-transparent rounded-md hover:text-sky-200 focus:outline-none",children:["Actions",e("svg",{className:"ml-2 -mr-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})}),s(l.Content,{children:[e(l.Link,{onClick:a=>{T(a,t)},children:"Edit"}),e(l.Link,{href:route("settings.status.archive",{status:t}),method:"post",as:"button",children:t.status=="active"?"Archive":"Restore"}),e(l.Link,{href:route("settings.status.delete",t.id),method:"delete",as:"button",children:"Delete"})]})]})})]},t.id)):{}})]})}):e(B,{title:"No Statuses",blurb:"To add a status, click the 'Add Status' button."}),e(v,{onClick:g,children:"Add Status"}),s(R,{show:k,onClose:n,children:[e("span",{className:"float-right mx-4 mt-2 text-2xl font-bold text-gray-300 cursor-pointer hover:text-sky-700",onClick:n,children:"Ã—"}),s("form",{onSubmit:r.id?j:A,className:"p-6",children:[e("h2",{className:"text-lg font-medium font-bold text-gray-900",children:r.id?"Update Status":"Create New Status"}),e(F,{value:r.id?"Click Save when finished to save your changes":"Create a new status to apply to documents, click Save when you are done"}),e("hr",{className:"mt-2 text-gray-300"}),s("div",{className:"mt-6",children:[e(b,{className:"font-bold",for:"name",value:"Name"}),e(w,{id:"name",type:"text",name:"name",ref:u,value:o.name??r.name??"",handleChange:t=>p("name",t.target.value),className:"block w-full mt-1 capitalize",isFocused:!0,placeholder:"Draft"}),e(N,{message:f.name,className:"mt-2"})]}),s("div",{className:"mt-6",children:[e(b,{className:"font-bold",for:"name",value:"Code"}),e(w,{id:"code",type:"text",name:"code",value:o.code??r.code??"",handleChange:t=>p("code",t.target.value),className:"block w-full mt-1 uppercase",placeholder:"DFT"}),e(N,{message:f.code,className:"mt-2"})]}),d()?s("div",{className:"flex justify-end mt-6",children:[e(v,{className:"mr-3",processing:M,children:"Save"}),e(y,{onClick:n,children:"Cancel"})]}):e("div",{className:"flex justify-end mt-6",children:e(y,{onClick:n,children:"Cancel"})})]})]})]})}export{O as default};
