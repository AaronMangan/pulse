import{r as d,K as A,a,j as e,g as R}from"./app-32cd764f.js";import{M as E,S as L}from"./SecondaryButton-4fec3733.js";import{T as y,I as g}from"./TextInput-9145c103.js";import{I as N}from"./InputLabel-08ca3def.js";import{P as w}from"./PrimaryButton-913814b9.js";/* empty css                         */import{D as l}from"./Dropdown-89f90c48.js";import{N as j}from"./NoData-0076ece7.js";import{S as B,Q as i}from"./SmallText-bf2b96ac.js";import"./transition-f9a59cdd.js";function G({className:b,types:m}){const[v,p]=d.useState(!1),[r,h]=d.useState([]),T=d.useRef(),k=m.length>0,{data:o,setData:u,post:C,processing:S,reset:c,errors:x}=A({type:""}),D=t=>{t.preventDefault(),R.post(route("settings.type.update",r.id),{name:o.name??r.name,code:o.code??r.code}).then(s=>{s.data.status&&s.data.status==="success"?(i.success(s.data.message),n(!0)):s.data.status&&s.data.status==="fail"&&i.error(s.data.message)}).catch(s=>{i.error("An internal error has occured, please contact your administrator")})},I=(t,s)=>{t.preventDefault(),h(s),f()},f=()=>{p(!0),c()},M=t=>{t.preventDefault(),C(route("settings.type.create"),{preserveScroll:!0,onSuccess:()=>n(),onError:()=>T.current.focus(),onFinish:()=>c()})},n=t=>{p(!1),h([]),c(),t&&window.location.reload()};return a("section",{className:`space-y-6 ${b}`,children:[a("header",{children:[e("h2",{className:"text-lg font-medium font-bold text-gray-900",children:"Types"}),e("p",{className:"mt-1 text-xs text-gray-600",children:"View the currently configured document types"})]}),k?e("div",{children:a("table",{className:"min-w-full rounded-md",children:[e("thead",{className:"bg-gray-600 border-b",children:a("tr",{children:[e("th",{scope:"col",className:"px-6 py-4 text-sm text-left text-white font-large",children:"Id"}),e("th",{scope:"col",className:"px-6 py-4 text-sm text-left text-white font-large",children:"Name"}),e("th",{scope:"col",className:"px-6 py-4 text-sm text-left text-white font-large",children:"Code"}),e("th",{scope:"col",className:"px-6 py-4 text-sm text-left text-white font-large",children:"Status"}),e("th",{scope:"col",className:"px-6 py-4 text-sm text-white font-large",children:"Actions"})]})}),e("tbody",{children:m.map(t=>a("tr",{className:"bg-white border-b",children:[e("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap",children:t.id}),e("td",{className:"px-6 py-4 text-sm font-light text-gray-900 whitespace-nowrap",children:t.name}),e("td",{className:"px-6 py-4 text-sm font-bold text-gray-900 whitespace-nowrap",children:t.code}),e("td",{className:"px-6 py-4 text-sm font-light text-gray-900 whitespace-nowrap",children:t.status=="active"?e("span",{className:"bg-green-100 text-green-800 uppercase text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-green-900 dark:text-green-300",children:"active"}):e("span",{className:"bg-yellow-100 text-yellow-800 text-xs uppercase font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-yellow-900 dark:text-yellow-300",children:"inactive"})}),e("td",{className:"px-6 py-4 text-sm font-light text-center text-gray-900 whitespace-nowrap",children:a(l,{children:[e(l.Trigger,{children:e("span",{className:"inline-flex rounded-md",children:a("button",{type:"button",className:"inline-flex items-center px-3 py-2 text-sm font-medium leading-4 text-white transition duration-150 ease-in-out bg-gray-600 border border-transparent rounded-md hover:text-sky-200 focus:outline-none",children:["Actions",e("svg",{className:"ml-2 -mr-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})}),a(l.Content,{children:[e(l.Link,{onClick:s=>{I(s,t)},children:"Edit"}),e(l.Link,{href:route("settings.type.archive",t),method:"post",as:"button",children:t.status=="active"?"Archive":"Restore"}),e(l.Link,{href:route("settings.type.delete",t),method:"delete",as:"button",children:"Delete"})]})]})})]},t.id))})]})}):e(j,{title:"No Types",blurb:"To add a type, click the 'Add Type' button."}),e(w,{onClick:f,children:"Add Type"}),a(E,{show:v,onClose:n,children:[e("span",{className:"float-right mx-4 mt-2 text-2xl font-bold text-gray-300 cursor-pointer hover:text-sky-700",onClick:n,children:"Ã—"}),a("form",{onSubmit:r.id?D:M,className:"p-6",children:[e("h2",{className:"text-lg font-medium font-bold text-gray-900",children:r.id?"Update Type":"Create New Type"}),e(B,{value:r.id?"Update existing type details":"Create a new type to apply to documents"}),e("hr",{className:"mt-2 text-gray-300"}),a("div",{className:"mt-6",children:[e(N,{className:"font-bold",for:"name",value:"Name"}),e(y,{id:"name",type:"text",name:"name",value:o.name??r.name??"",handleChange:t=>u("name",t.target.value),className:"block w-full mt-1 capitalize",isFocused:!0,placeholder:"e.g. Report"}),e(g,{message:x.name,className:"mt-2"})]}),a("div",{className:"mt-6",children:[e(N,{className:"font-bold",for:"name",value:"Code"}),e(y,{id:"code",type:"text",name:"code",value:o.code??r.code??"",handleChange:t=>u("code",t.target.value),className:"block w-full mt-1 uppercase",placeholder:"REP"}),e(g,{message:x.name,className:"mt-2"})]}),a("div",{className:"flex justify-end mt-6",children:[e(w,{className:"mr-3",processing:S,children:"Save"}),e(L,{onClick:n,children:"Cancel"})]})]})]})]})}export{G as default};
